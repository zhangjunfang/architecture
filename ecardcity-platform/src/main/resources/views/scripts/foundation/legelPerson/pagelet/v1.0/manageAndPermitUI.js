var setting={data:{simpleData:{enable:true}},check:{enable:true},callback:{beforeClick:function(b,a){}}};function optDel(){var a=getCheckedRowsValue();if(!a.length){return alert("请选择记录！")}layer.confirm("您确定要执行删除操作吗？",function(b){$.ajax({url:"del",type:"POST",dataType:"json",data:{data:JSON.stringify({ids:a})}}).done(function(c){console.log(c);layer.close(b);layer.msg("删除成功")}).complete(function(){})})}function showAddDlg(){var a=$.layer({type:1,border:0,area:["500px","330px"],title:"添加系统客户信息",closebtn:false,page:{dom:"#frmAdd"}})}function showPermitDlg(){var b=getCheckedRowsValue();if(1!==b.length){return alert("请选择一条有效记录！")}var a=$.layer({type:1,border:0,area:["500px","230px"],title:"客户授权",closebtn:false,page:{dom:"#frmPermit"}})}function permitNext(){var b=getCheckedRowsValue();if(1!==b.length){return alert("请选择一条有效记录！")}var c=$("#permitFrm_AppPackage").val();var a=$.layer({type:1,border:0,area:["500px","330px"],title:"客户授权",closebtn:false,page:{dom:"#frmPermit2"}});$.ajax({url:"/controller/menuManage/AppMenuTree",type:"POST",dataType:"json",data:{appid:c}}).done(function(f){for(var e=0;e<f.length;e++){var d=f[e];d.pId=d.pid;d.name=d.nodename;d.open=true}$.fn.zTree.init($("#menuTree"),setting,f);disabledNode()}).complete(function(){})}function disabledNode(f){var a=$.fn.zTree.getZTreeObj("menuTree");var d=a.getNodesByParam("level",0);for(var b=0;b<d.length;b++){d[b].nocheck=true;a.updateNode(d[b])}var c=a.getNodesByParam("level",2);for(var b=0;b<c.length;b++){c[b].nocheck=true;a.updateNode(c[b])}}function showEditDlg(){var d=getCheckedRowsValue();if(1!==d.length){return alert("请选择一条有效记录！")}var c=getCheckedRowsCheckbox();var b=c.data("object");$("#editFrm_CustomerUnitCode").val(b.CustomerUnitCode);$("#editFrm_CustomerName").val(b.CustomerName);$("#editFrm_LinkMan").val(b.LinkMan);$("#editFrm_Telephone").val(b.Telephone);$("#editFrm_Email").val(b.Email);$("#editFrm_Address").val(b.Address);$("#editFrm_BankCode").val(b.BankCode);$("#editFrm_BankCardNo").val(b.BankCardNo);$("#editFrm_Status").val(b.Status);$("#editFrm_Remark").val(b.Remark);var a=$.layer({type:1,border:0,area:["500px","330px"],title:"编辑系统客户信息",closebtn:false,page:{dom:"#frmEdit"}})}$(function(){console.log("hello hx!")});function validateForm(){var a=$("#addFrm").serializeObjectForm();return a}function validateEditForm(){var a=$("#editFrm").serializeObjectForm();return a}function add(){var a=validateForm();if(!a){alert("表单验证失败");return}$.ajax({url:"add",type:"POST",dataType:"json",data:{data:JSON.stringify(a)}}).done(function(b){console.log(b)}).complete(function(){})}function edit(){var a=validateEditForm();if(!a){alert("表单验证失败");return}$.ajax({url:"edit",type:"POST",dataType:"json",data:{data:JSON.stringify(a)}}).done(function(b){console.log(b)}).complete(function(){})}function resAdd(){var a=$("#addFrm")[0];a.reset()}function resEdit(){var a=$("#editFrm")[0];a.reset()}function getCheckedRowsCheckbox(){var a;$("#table1").find("tbody tr td:nth-child(1) input:checkbox:checked").each(function(){return a=$(this)});return a}function getCheckedRowsValue(){var a=[];$("#table1").find("tbody tr td:nth-child(1) input:checkbox:checked").each(function(){a.push($(this).val())});return a}(function(){var d=$("#table1");var a=d.find("tbody tr td:nth-child(1) input[type='checkbox']");var e=d.find("thead tr th:nth-child(1) input[type='checkbox']");$(e).bind("change",function(){var g=$(this).is(":checked");for(var f=0;f<a.length;f++){$(a[f]).prop("checked",g)}});for(var c=0,b=a.length;c<b;c++){$(a[c]).bind("change",function(){var f,h;var g=$(this).is(":checked");if(g){h=0;for(f=0;f<b;f++){if(!$(a[f]).prop("checked")){break}h++}e.prop("checked",b===h)}else{e.prop("checked",g)}})}})();